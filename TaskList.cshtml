@model ProjectMaking.PaginatedList<ProjectMaking.Models.EntityModel.WorkTask>
@{
    ViewData["Title"] = "TaskList";
    int numberofTask = 0;
    int p = 0;
    var cp = Model.PageIndex;
    p = (cp - 1) * 6 + 1;

}

<div class="container-fluid">
    <!--Appex Chart-->
    <div class="row">
        <div class="col-12">
            <div class="card">
                <div class="card-body">
                    <h4 class="mt-0 header-title">Tasks Reports</h4>
                    <div class="row">
                        <div class="col-md-4">
                            <div class="text-center">
                                <h3> <span class="text-primary">@ViewBag.count</span><i class="fas fa-tasks text-secondary ml-1"></i></h3>
                                <p class="text-muted">Total Tasks</p>
                            </div>
                        </div><!--end col-->

                        <div class="col-md-4">
                            <div class="text-center">
                                @if (@ViewBag.activeTask != null)
                                {
                                    <h3><span class="text-primary">@ViewBag.activeTask</span> <i class=" fas fa-spinner text-success ml-1"></i></h3>
                                }
                                else
                                {
                                    <h3><span class="text-primary">@ViewBag.activeTask</span><i class=" fas fa-spinner text-success ml-1"></i></h3>
                                }

                                <p class="text-muted">Tasks Active</p>
                            </div>
                        </div><!--end col-->

                        <div class="col-md-4">
                            <div class="text-center">
                                @if (@ViewBag.completetask != null)
                                {
                                    <h3><span class="text-primary">@ViewBag.completetask</span> <i class="fas fa-check-double text-danger ml-1"></i></h3>
                                }
                                else
                                {
                                    <h3><span class="text-primary">@ViewBag.completetask</span> <i class="fas fa-check-double text-danger ml-1"></i></h3>
                                }

                                <p class="text-muted">Tasks Complete</p>
                            </div>
                        </div><!--end col-->



                    </div><!--end row-->
                    <div class="apexchart-wrapper chart-demo m-0">
                        <div id="task_report" class="chart-gutters"></div>
                    </div>
                </div><!--end card-body-->
            </div><!--end card-->
        </div><!--end col-->
    </div><!--end row-->
    <!--Appex Chart End-->



    <div class="row">
        <div class="col-lg-6">

        </div><!--end col-->

        <div class="col-lg-6 text-right">
            <div class="text-right">
                <ul class="list-inline">
                    <li class="list-inline-item">
                        <button type="button" class="btn btn-primary"><i class="dripicons-gear"></i></button>
                    </li>
                    <li class="list-inline-item">
                        <button type="button" class="btn btn-primary">Add New Task</button>
                    </li>
                </ul>
            </div>
        </div><!--end col-->
    </div><!--end row-->
    <!--Task List-->
    <div class="row">
        @foreach (var item in Model)
        {
            if (numberofTask % 2 == 0)
            {
                <div class="col-lg-6">
                    <div class="card">
                        <div class="card-body">
                            <div class="task-box">
                                <div class="task-priority-icon"><i class="@item.IconClass  @item.IconColor"></i></div>
                                <p class=" float-right text-dark">
                                    <span class="text-dark">@item.ToDate.ToString("hh:mm:ss")</span>
                                    <span><i class="far fa-fw fa-clock text-primary"></i>@item.ToDate.ToString("dd/mm/yyyy")</span>
                                </p>
                                <h5 class="mt-0">@item.Name</h5>
                                <div>
                                    <h6 style="text-align:justify;" class="text-muted mb-1">
                                        @item.Requirement
                                    </h6>
                                </div>

                                <p class="text-muted text-right mb-1">15% Complete</p>
                                <div class="progress mb-4" style="height: 2px;">
                                    <div class="progress-bar bg-info" role="progressbar" style="width: 15%;" aria-valuenow="15" aria-valuemin="0" aria-valuemax="100"></div>
                                </div>
                                <div class="d-flex justify-content-between">
                                    <div class="img-group">
                                        <a class="user-avatar user-avatar-group">
                                            <img src="../assets/images/users/user-3.jpg" alt="user" class="rounded-circle thumb-xs">
                                        </a>

                                    </div><!--end img-group-->
                                    <ul class="list-inline mb-0 align-self-center">
                                        <li class="list-item d-inline-block mr-2">
                                            @for (int i = 0; i < @item.Mark; i++)
                                            {
                                                <i class="fa fa-star text-warning font-15"></i>
                                            }
                                            @for (int i = 0; i < 7 - (@item.Mark); i++)
                                            {
                                                <i class="fa fa-star  font-15"></i>
                                            }

                                        </li>
                                        <li class="list-item d-inline-block mr-2">
                                            <a>
                                                <span><i class="far fa-fw fa-clock text-primary"></i>@item.ToDate.ToString("dd/mm/yyyy")</span>
                                            </a>
                                        </li>
                                        <li class="list-item d-inline-block">
                                            <a>
                                                <i class="mdi mdi-comment-outline text-danger font-15"></i>
                                                <span class="text-muted font-weight-bold">@ViewBag.comment</span>
                                            </a>
                                        </li>
                                        <li class="list-item d-inline-block">
                                            <a class="btn btn-soft-dark ml-2">
                                                <i class="mdi mdi-pencil-outline text-success font-18"></i>
                                            </a>
                                        </li>
                                        <li class="list-item d-inline-block">
                                            <a class="btn btn-soft-dark">
                                                <i class="mdi mdi-trash-can-outline text-danger font-18"></i>
                                            </a>
                                        </li>
                                    </ul>
                                </div>
                            </div><!--end task-box-->
                        </div><!--end card-body-->
                    </div><!--end card-->


                </div><!--end col-->
            }
            else
            {
                <div class="col-lg-6">
                    <div class="card">
                        <div class="card-body">
                            <div class="task-box">
                                <div class="task-priority-icon"><i class="@item.IconClass  @item.IconColor"></i></div>
                                <p class=" float-right text-dark">
                                    <span class="text-dark">@item.ToDate.ToString("hh:mm:ss")</span>
                                    <span><i class="far fa-fw fa-clock text-primary"></i>@item.ToDate.ToString("dd/mm/yyyy")</span>
                                </p>
                                <h5 class="mt-0">@item.Name</h5>
                                <p style="text-align:justify;" class="text-muted mb-1">
                                    @item.Requirement
                                </p>
                                <p class="text-muted text-right mb-1">15% Complete</p>
                                <div class="progress mb-4" style="height: 2px;">
                                    <div class="progress-bar bg-info" role="progressbar" style="width: 15%;" aria-valuenow="15" aria-valuemin="0" aria-valuemax="100"></div>
                                </div>
                                <div class="d-flex justify-content-between">
                                    <div class="img-group">
                                        <a class="user-avatar user-avatar-group">
                                            <img src="../assets/images/users/user-3.jpg" alt="user" class="rounded-circle thumb-xs">
                                        </a>

                                    </div><!--end img-group-->
                                    <ul class="list-inline mb-0 align-self-center">
                                        <li class="list-item d-inline-block mr-2">
                                            @for (int i = 0; i < @item.Mark; i++)
                                            {
                                                <i class="fa fa-star text-warning font-15"></i>
                                            }
                                            @for (int i = 0; i < 7 - (@item.Mark); i++)
                                            {
                                                <i class="fa fa-star  font-15"></i>
                                            }

                                        </li>
                                        <li class="list-item d-inline-block mr-2">
                                            <a>
                                                <span><i class="far fa-fw fa-clock text-primary"></i>@item.ToDate.ToString("dd/mm/yyyy")</span>
                                            </a>
                                        </li>
                                        <li class="list-item d-inline-block">
                                            <a class="" href="#">
                                                <i class="mdi mdi-comment-outline text-danger font-15"></i>
                                                <span class="text-muted font-weight-bold">@ViewBag.comment</span>
                                            </a>
                                        </li>
                                        <li class="list-item d-inline-block">
                                            <a class="ml-2">
                                                <i class="mdi mdi-pencil-outline text-success font-18"></i>
                                            </a>
                                        </li>
                                        <li class="list-item d-inline-block">
                                            <a class="">
                                                <i class="mdi mdi-trash-can-outline text-danger font-18"></i>
                                            </a>
                                        </li>
                                    </ul>
                                </div>
                            </div><!--end task-box-->
                        </div><!--end card-body-->
                    </div><!--end card-->

                </div><!--end col-->
            }

        }

    </div><!--end row-->
    <!--Task List End-->
    <div class="row">
        <div class="col-md-6">

        </div>
        <div class="col-md-6">
            @{
                var prevDisabled = !Model.HasPreviousPage ? "disabled" : "";
                var nextDisabled = !Model.HasNextPage ? "disabled" : "";
            }

            <nav aria-label="..." style="margin-left:180px;">
                <ul class="pagination">
                    <li class="page-item">
                        <a asp-action="TaskList"
                           asp-controller="WorkTask"
                           asp-route-page="1"
                           class="page-link">First</a>
                    </li>

                 
                        <li class="page-item">
                            <a style="height:34px; text-align:center;" asp-action="TaskList"
                               asp-controller="WorkTask"
                               asp-route-page="@(Model.PageIndex - 1)"
                               class="page-link btn bg-warning @prevDisabled"><span style="margin-top:-20px;">Previous</span></a>
                        </li>
                   

                    @{
                        int start = cp - 2;
                        int end = cp + 2;

                        for (int j = start; j <= end; j++)
                        {
                            if (j > 0 && j <= Model.TotalPages)
                            {
                                if (j == cp)
                                {

                                    <li class="page-item">
                                        <a class="page-link bg-primary" asp-action="TaskList"
                                           asp-controller="WorkTask"
                                           asp-route-page="@j">@j</a>
                                    </li>
                                }
                                else
                                {

                                    <li class="page-item">
                                        <a class="page-link" asp-action="TaskList"
                                           asp-controller="WorkTask"
                                           asp-route-page="@j">@j</a>
                                    </li>
                                }
                            }
                        }
                    }

                    <li class="page-item">
                        <a asp-action="TaskList"
                           asp-controller="WorkTask"
                           asp-route-page="@(Model.PageIndex+1)"
                           class="page-link @nextDisabled">Next</a>
                    </li>
                    <li class="page-item">
                        <a asp-action="TaskList"
                           asp-controller="WorkTask"
                           asp-route-page="@(Model.TotalPages)"
                           class="page-link @nextDisabled">Last</a>
                    </li>
                </ul><!--end pagination-->
            </nav><!--end nav-->
        </div>
    </div>

    <br />
</div><!-- container -->




@section Scripts{

    <script src="~/assets/pages/jquery.projects_task.init.js"></script>
}